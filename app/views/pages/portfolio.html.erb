<div id="portfolio" class="max-w-3xl mx-auto p-6 shadow-lg rounded-xl">
  <div class="mt-6 bg-gray-700 p-4 rounded-lg shadow-md">
    <div class="flex justify-start space-x-2 items-center">
      <h2 class="text-3xl font-semibold text-white">Total Holdings</h2>
      <%= link_to deposit_form_path, 
        class: "bg-gray-600 text-white px-2 py-1 rounded hover:bg-gray-800 transition",
        data: {turbo_frame: "deposit_modal"} do%>
        Deposit
        <% end %>
    </div>
    <p class="text-gray-200 mt-2">Balance: <%= number_to_currency(@total_holdings) %></p>
    <%= turbo_frame_tag "balance" do %>
      <p class="text-gray-200 mt-2">Wallet: <%= number_to_currency(@balance) %></p>
    <% end %>
  </div>
  
  <div class="mt-6 bg-white p-4 rounded-lg shadow-md">
    <table class="w-full table-auto text-left">
      <thead>
        <tr class="border-b">
          <th class="py-2">Symbol</th>
          <th class="py-2">Company</th>
          <th class="py-2">Price</th>
          <th class="py-2">Shares</th>
          <th class="py-2">Total Value</th>
        </tr>
      </thead>
      <tbody>
        <% @holdings.each do |holding| %>
          <% stock = holding.stock %> <!-- Access the associated stock object -->
          <tr>
            <td class="py-2"><%= stock.symbol %></td>
            <td><%= stock.name %></td>
            <td><%= number_to_currency(holding.buy_price) %></td>
            <td><%= holding.shares %></td>
            <td><%= number_to_currency(holding.total) %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
